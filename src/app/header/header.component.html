<div>
    <nav
        class="navbar navbar-light"
        [ngClass]="{
            'header-dark-mode': darkModeService.isDarkMode
        }"
    >
        <div class="header-name-gear-icon">
            <button
                id="off-canvas-start-button"
                class="off-canvas-start-button"
                [ngClass]="{
                    'header-button-dark-mode': darkModeService.isDarkMode
                }"
                type="button"
                title="hap menynë"
                data-bs-toggle="offcanvas"
                data-bs-target="#offcanvasStart"
                aria-controls="offcanvasStart"
            >
                <span
                    class="navbar-toggler-icon"
                    [ngClass]="{
                        'navbar-toggler-icon-dark-mode':
                            darkModeService.isDarkMode
                    }"
                    data-test="navbar-toggler-icon"
                ></span>
            </button>
            <span
                routerLink="/"
                title="faqja kryesore"
                class="penda-header-logo"
                [ngClass]="{
                    'header-text-dark-mode': darkModeService.isDarkMode
                }"
                data-test="home-button"
                >&nbsp;penda</span
            >
        </div>

        <div class="header-name-gear-icon">
            <i
                routerLink="/settings"
                class="p-3 settings-gear-button"
                title="hap cilësimet"
                [ngClass]="{
                    'bi bi-gear': !isSettingsRoute(),
                    'bi bi-gear-fill': isSettingsRoute(),
                    'settings-gear-dark-mode': darkModeService.isDarkMode
                }"
                data-test="settings-gear-button"
            ></i>

            <span class="header-separator">|</span>


            <ng-template
                [ngIf]="authenticationService.isAuthenticated() | async"
                [ngIfElse]="authenticateButton"
            >
                <div class="btn-group user-dropdown-menu">
                    <button
                        type="button"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                        class="btn btn-secondary dropdown-toggle"
                    >
                        <span>{{ authenticationService.user.first_name }}</span>
                    </button>
                    <ul
                        class="dropdown-menu dropdown-menu-end"
                        [ngClass]="{
                            'dropdown-menu-dark-mode':
                                darkModeService.isDarkMode
                        }"
                    >
                        <li
                            class="dropdown-menu-item-list"
                            [ngClass]="{
                                'dropdown-menu-item-list-dark-mode':
                                    darkModeService.isDarkMode
                            }"
                        >
                            <a
                                class="dropdown-item menu-dropdown-item"
                                [ngClass]="{
                                    'menu-dropdown-item-dark-mode':
                                        darkModeService.isDarkMode
                                }"
                                routerLink="/profile"
                            >
                                <span
                                    class="profile-icon-dropdown bi-person-circle"
                                ></span>
                                <span>Profili</span>
                            </a>
                        </li>
                        <li>
                            <hr
                                class="dropdown-divider menu-item-divider"
                                [ngClass]="{
                                    'menu-item-divider-dark-mode':
                                        darkModeService.isDarkMode
                                }"
                            />
                        </li>
                        <li
                            class="dropdown-menu-item-list"
                            [ngClass]="{
                                'dropdown-menu-item-list-dark-mode':
                                    darkModeService.isDarkMode
                            }"
                        >
                            <a
                                class="dropdown-item menu-dropdown-item"
                                [ngClass]="{
                                    'menu-dropdown-item-dark-mode':
                                        darkModeService.isDarkMode
                                }"
                                (click)="logout()"
                            >
                                <span
                                    ><i
                                        class="bi bi-box-arrow-right"
                                        [ngClass]="{
                                            'logout-icon-dark-mode':
                                                darkModeService.isDarkMode
                                        }"
                                    ></i
                                ></span>
                                <span>Dil</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </ng-template>
            <ng-template #authenticateButton>
                <button
                    class="btn btn-primary login-header-button"
                    routerLink="/authentication"
                >
                    Identifikohu
                </button>
            </ng-template>

            <!-- <i class="bi bi-lock-fill" style='font-size: 20px'></i> ??? person-fill-lock -->

        </div>
    </nav>
</div>

<div
    id="offcanvasStart"
    class="offcanvas offcanvas-start"
    [ngClass]="{
        'offcanvas-start-dark-mode': darkModeService.isDarkMode
    }"
    tabindex="-1"
    aria-labelledby="offcanvasStartLabel"
>
    <div
        class="offcanvas-header"
        [ngClass]="{
            'offcanvas-header-dark-mode': darkModeService.isDarkMode
        }"
    >
        <h5 id="offcanvasStartLabel">penda</h5>
        <button
            id="offcanvasCloseButton"
            type="button"
            class="btn-close text-reset"
            [ngClass]="{
                'offcanvas-close-button-dark-mode': darkModeService.isDarkMode
            }"
            data-bs-dismiss="offcanvas"
            aria-label="Close"
            data-test="close-offcanvas-button"
        ></button>
    </div>
    <hr class="off-canvas-hr" />
    <div
        class="offcanvas-body"
        [ngClass]="{
            'offcanvas-body-dark-mode': darkModeService.isDarkMode
        }"
    >
        <div class="list-group list-group-flush">
            <div class="item-action-list">
                <!--                <div style="box-shadow: 0 0 1px 1px #E3E3E3AE;">-->
                <!--                    <a role="button" class="dropdown-toggle list-group-item list-group-item-action mb-3"-->
                <!--                       data-bs-toggle="dropdown" aria-expanded="false">Llojet&nbsp;e&nbsp;Shenjimeve&nbsp;<span-->
                <!--                        class="badge bg-primary rounded-pill">{{markingTypesCount}}</span>-->
                <!--                    </a>-->
                <!--                    <ul class="dropdown-menu">-->
                <!--                        <li *ngFor="let markingTypeKey of markingTypeKeys">-->
                <!--                            <a class="{{markingTypes[markingTypeKey]['enabled'] === false ? 'disabled':''}} dropdown-item"-->
                <!--                               routerLink="{{markingTypeKey}}"-->
                <!--                               (click)="closeOffcanvas()">{{markingTypes[markingTypeKey]['description']}}</a>-->
                <!--                        </li>-->
                <!--                    </ul>-->
                <!--                </div>-->
                <div>
                    <a
                        routerLink="/settings"
                        class="nav-text list-group-item-action mb-3"
                        [ngClass]="{
                            'offcanvas-nav-text-dark-mode':
                                darkModeService.isDarkMode
                        }"
                        role="button"
                        data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasStart"
                        aria-controls="offcanvasStart"
                        data-test="settings-side-menu-item"
                        ><i
                            class="bi bi-gear"
                            [ngClass]="{
                                'offcanvas-bi-info-circle-dark-mode':
                                    darkModeService.isDarkMode
                            }"
                        >
                        </i
                        >Cilësimet</a
                    >
                </div>
                <div>
                    <a
                        routerLink="/shortcuts"
                        class="nav-text list-group-item-action mb-3"
                        [ngClass]="{
                            'offcanvas-nav-text-dark-mode':
                                darkModeService.isDarkMode
                        }"
                        role="button"
                        data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasStart"
                        aria-controls="offcanvasStart"
                        ><i
                            class="bi bi-keyboard"
                            [ngClass]="{
                                'offcanvas-bi-info-circle-dark-mode':
                                    darkModeService.isDarkMode
                            }"
                        >
                        </i
                        >Shkurtoret</a
                    >
                </div>
                <div>
                    <a
                        routerLink="/dashboard"
                        role="button"
                        class="nav-text list-group-item-action mb-3"
                        [ngClass]="{
                            'offcanvas-nav-text-dark-mode':
                                darkModeService.isDarkMode
                        }"
                        data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasStart"
                        aria-controls="offcanvasStart"
                        ><i
                            class="bi bi-stars"
                            [ngClass]="{
                                'offcanvas-bi-info-circle-dark-mode':
                                    darkModeService.isDarkMode
                            }"
                        >
                        </i
                        >Penda e Artë</a
                    >
                </div>
                <div>
                    <a
                        routerLink="/about"
                        role="button"
                        data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasStart"
                        aria-controls="offcanvasStart"
                        class="nav-text list-group-item-action mb-3"
                        [ngClass]="{
                            'offcanvas-nav-text-dark-mode':
                                darkModeService.isDarkMode
                        }"
                        ><i
                            class="bi bi-info-circle"
                            [ngClass]="{
                                'offcanvas-bi-info-circle-dark-mode':
                                    darkModeService.isDarkMode
                            }"
                        >
                        </i
                        >Rreth&nbsp;Pendës</a
                    >
                </div>
                <div>
                    <a
                        routerLink="/privacy-policy"
                        role="button"
                        data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasStart"
                        aria-controls="offcanvasStart"
                        class="nav-text list-group-item-action mb-3"
                        [ngClass]="{
                            'offcanvas-nav-text-dark-mode':
                                darkModeService.isDarkMode
                        }"
                        ><i
                            class="bi bi-info-circle"
                            [ngClass]="{
                                'offcanvas-bi-info-circle-dark-mode':
                                    darkModeService.isDarkMode
                            }"
                        >
                        </i
                        >Politikat e Privatësisë</a
                    >
                </div>
                <div>
                    <a
                        routerLink="/terms-of-use"
                        role="button"
                        data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasStart"
                        aria-controls="offcanvasStart"
                        class="nav-text list-group-item-action mb-3"
                        [ngClass]="{
                            'offcanvas-nav-text-dark-mode':
                                darkModeService.isDarkMode
                        }"
                        ><i
                            class="bi bi-shield-check"
                            [ngClass]="{
                                'offcanvas-bi-info-circle-dark-mode':
                                    darkModeService.isDarkMode
                            }"
                        >
                        </i
                        >Kushtet e Përdorimit</a
                    >
                </div>
                <div>
                    <a
                        href="https://github.com/OpenCovenant"
                        role="button"
                        class="nav-text list-group-item-action mb-3"
                        [ngClass]="{
                            'offcanvas-nav-text-dark-mode':
                                darkModeService.isDarkMode
                        }"
                        target="_blank"
                        rel="noopener noreferrer"
                        ><i
                            class="bi bi-house-door"
                            [ngClass]="{
                                'offcanvas-bi-info-circle-dark-mode':
                                    darkModeService.isDarkMode
                            }"
                        >
                        </i
                        >Rreth&nbsp;Nesh</a
                    >
                </div>
            </div>
            <hr class="off-canvas-hr" />
            <div class="d-flex dark-mode-div">
                <div>Ndrysho Pamjen</div>

                <div class="toggle-switch">
                    <label class="dark-mode-label">
                        <input
                            data-test="dark-mode-button-toggle-switch"
                            class="dark-mode-input"
                            type="checkbox"
                            [id]="darkModeService"
                            [(ngModel)]="darkModeService.isDarkMode"
                            (change)="darkModeService.onDarkModeChange()"
                        />
                        <span class="dark-mode-slider"></span>
                    </label>
                </div>
            </div>
            <ng-template
                [ngIf]="darkModeService.isDarkMode"
                [ngIfElse]="otherModeText"
            >
                <span class="dark-mode-informative-text"
                    >Përdor Pamjen e Çelur</span
                >
            </ng-template>
            <ng-template #otherModeText>
                <span class="light-mode-informative-text"
                    >Përdor Pamjen e Errët</span
                >
            </ng-template>
        </div>
    </div>
</div>
